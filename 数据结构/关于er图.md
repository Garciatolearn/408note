## 关于er图

**一对一：** **一对一关系是指对于实体集A与实体集B，A中的每一个实体至多与B中一个实体有关系；反之，在实体集B中的每个实体至多与实体集A中一个实体有关系**

例如一个座位对应着一个顾客

一个身份证号对应一个人

在一个组织中，员工管理一个部门，每个部门由一些员工管理。因此，em> Department实体全部参与，并且给定实体之间存在一对一的关系。现在，如果我们想要存储员工开始管理部门的Start_Date，那么我们可能会认为我们可以将Start_Date属性赋予关系管理。但是，在这种情况下，我们可以通过将Start_Date属性与Employee或Department实体相关联来避免它。
![image-20221211172300498](C:\Users\Garcia\AppData\Roaming\Typora\typora-user-images\image-20221211172300498.png)

**一对多：*一对多关系是指实体集A与实体集B中至少有N(N>0)个实体有关系；并且实体集B中每一个实体至多与实体集A中一个实体有关系**

例如一个部门能有许多员工，但一个员工只能对应一个部门；

在一个组织中，许多员工可以为一个部门工作，但每个员工只能在一个部门工作。因此，实体之间存在一对多的关系。现在，如果我们想在员工开始为部门工作时存储Start_Date，那么我们应该将其分配给Employee实体，而不是将其分配给关系。将其分配给员工实体是有道理的，因为每个员工只能为单个部门工作，但另一方面，一个部门可以让很多员工在其下工作，因此，如果我们将Start_Date属性分配给Department，则没有意义。

![image-20221211172318118](C:\Users\Garcia\AppData\Roaming\Typora\typora-user-images\image-20221211172318118.png)

多对多就很有趣了，例如一个玩家可以玩多个游戏，而一个游戏能有多个玩家；在一个组织中，员工可以同时处理许多项目，每个项目都可以让很多员工参与其中。因此，这是一个多对多的关系。因此，将Number_of_Working_hours分配给员工将无法工作，因为问题是它将存储哪个项目的工作时间，因为单个员工可以处理多个项目。与项目实体的情况类似。因此，我们被迫将Number_of_Working_hours属性分配给关系。

![image-20221211172403606](C:\Users\Garcia\AppData\Roaming\Typora\typora-user-images\image-20221211172403606.png)

---

、码=超键：能够唯一标识一条记录的属性或属性集。

标识性：一个数据表的所有记录都具有不同的超键
非空性：不能为空
有些时候也把码称作“键”
　　2、候选键=候选码：能够唯一标识一条记录的最小属性集

标识性：一个数据表的所有记录都具有不同的候选键
最小性：任一候选键的任何真子集都不能唯一标识一个记录（比如在成绩表中（学号,课程号）是一个候选键，单独的学号，课程号都不能决定一条记录）
非空性：不能为空
候选键是没有多余属性的超键
举例：学生ID是候选码，那么含有候选码的都是码。
少部分地方也有叫超级码的，但是见得不多
　　3、主键=主码：某个能够唯一标识一条记录的最小属性集（是从候选码里人为挑选的一条）

唯一性：一个数据表只能有一个主键
标识性：一个数据表的所有记录都具有不同的主键取值
非空性：不能为空
人为的选取某个候选码为主码
4、主属性  包含在任一候选码中的属性称主属性。简单来说，主属性是候选码所有属性的并集

      非主属性  不包含在候选码中的属性称为非主属性。 非主属性是相对于主属性来定义的。

5、外键（foreign key）：子数据表中出现的父数据表的主键，称为子数据表的外键。

6、全码：当所有的属性共同构成一个候选码时，这时该候选码为全码。（教师，课程，学生）假如一个教师可以讲授多门课程，某门课程可以有多个教师讲授，学生可以听不同教师讲授的不同课程，那么，要区分关系中的每一个元组，这个关系模式R的候选码应为全部属性构成 （教师、课程、学生），即主码。

**主键：**

 主键就是候选键里面的一个，是人为规定的，例如学生表中，我们通常会让“学号”做主键，学号能唯一标识这一个元组。

**外键：**

  外键就很简单了，假如我们还有一个教师表，每个教师都有自己的编号，假设老师编号在教师表中是**主键**，在学生表中它就是**外键**。

---

元素	描述	表示形似
实体	客观存在并可以相互区别的事物	用矩形框，矩形框内写明实体名
属性	实体所具有的一个属性	用椭圆型表示，并用无向边将其与相应的实体连接起来
关系	实体和实体之间以及实体内部的关系	
用菱形表示，菱形框内写明联系名，并用无向边分别与有关实体连接起来，

同时在无向边旁边标上联系的类型ER的实体分为弱实体 和 复合实体：
 （1）弱实体：一个实体必须依赖另一个实体存在，那么前者是弱实体，后者是强实体。
 弱实体和强实体的联系必然只有1：N或者1：1，这是由于弱实体完全依赖于强实体，强实体不存在，那么弱实体就不存在，所以弱实体是完全参与联系的，因此弱实体与联系之间的联系也是用的双线菱形。

，ER图的属性分为复合属性、多值属性和派生属性、可选属性，同时还有用来表示联系的属性，称为联系属性；属性分为唯一属性（ unique attribute）和非唯一属性，唯一属性指的是唯一可用来标识该实体实例或者成员的属性，用下划线表示，一般来讲实体都至少有一个唯一属性。
 （1）复合属性(composite attribute)：
 复合属性是指具有多个属性的组合，例如名字属性，它可以包含姓氏属性和名字属性

2）多值属性（multivalued attribute）：
一个实体的某个属性可以有多个不同的取值，例如一本书的分类属性，这本书有多个分类，例如科学、医学等，这个分类就是多值属性， 用双线椭圆表示

（4）可选属性(optional attribute)：
并不是所有的属性都必须有值，有些属性的可以没有值，这就是可选属性，在椭圆的文字后用（O）来表示，如下图的地址就是一个可选属性。